# نظام المستخدمين والمصادقة

## نظرة عامة

تم تطوير نظام شامل للمستخدمين والمصادقة يفصل بين المشرفين والمستخدمين العاديين.

## إعداد النظام لأول مرة

### 1. إنشاء الأندية
1. انقر ثلاث مرات على الشعار في الصفحة الرئيسية
2. اذهب إلى تبويب "إدارة النوادي"
3. انقر على "إضافة نادي جديد"
4. املأ البيانات المطلوبة:
   - اختر الرابطة (الولاية)
   - اسم النادي بالعربية والإنجليزية
   - الوصف والعنوان
   - معلومات التواصل
5. احفظ النادي

### 2. إنشاء المستخدمين
1. في نفس لوحة التحكم، اذهب إلى تبويب "إدارة المستخدمين"
2. انقر على "إضافة مستخدم جديد"
3. املأ البيانات المطلوبة:
   - اسم المستخدم وكلمة المرور
   - الاسم الأول والأخير
   - الدور (رياضي، مدرب، طاقم طبي، إلخ)
   - **اختر النادي المرتبط** من القائمة المنسدلة
4. احفظ المستخدم

### 3. حل مشكلة "النادي غير موجود"
إذا ظهرت لك رسالة "النادي غير موجود" عند تسجيل الدخول:

1. **تأكد من إنشاء النادي أولاً** في "إدارة النوادي"
2. **اربط المستخدم بالنادي** عند إنشاء المستخدم
3. **تأكد من حفظ التغييرات** في كلا التبويبين
4. **أعد تسجيل الدخول** بعد حفظ التغييرات

### 3. استخدام النظام
- **للمشرفين**: النقر ثلاث مرات على الشعار
- **للمستخدمين العاديين**: صفحة تسجيل الدخول

## أنواع المستخدمين

### 1. المشرفون (Admins)
- **طريقة الدخول**: النقر ثلاث مرات على الشعار في الصفحة الرئيسية
- **الصلاحيات**:
  - إدارة المستخدمين (إضافة، تعديل، حذف)
  - إنشاء وإدارة الأندية
  - الوصول الكامل لجميع البيانات
  - إدارة النظام

### 2. المستخدمون العاديون
- **طريقة الدخول**: صفحة تسجيل الدخول المخصصة
- **أنواع المستخدمين**:
  - **الرياضيون (Athletes)**: يمكنهم الوصول لملفهم الشخصي والمركز الصحي
  - **المدربون (Coaches)**: يمكنهم إدارة اللاعبين في ناديهم
  - **الطاقم الطبي (Medical Staff)**: يمكنهم إدارة الصحة والعلاج
  - **الموظفون الإداريون**: حسب الدور المحدد

## كيفية عمل النظام

### 1. إنشاء المستخدمين
- يتم إنشاء جميع المستخدمين من قبل المشرف في لوحة التحكم
- كل مستخدم مرتبط بنادي محدد (clubId)
- يتم تحديد دور كل مستخدم (role)

### 2. ربط اللاعبين بالأندية
- عند إنشاء رياضي، يتم ربطه بنادي محدد
- المدرب يرى فقط اللاعبين المسجلين في ناديه
- لا توجد أسماء أندية افتراضية في الكود

### 3. نظام المصادقة
- **للمشرفين**: النقر ثلاث مرات على الشعار
- **للمستخدمين العاديين**: صفحة تسجيل دخول منفصلة
- كل مستخدم له اسم مستخدم وكلمة مرور فريدة

## البيانات المطلوبة للمستخدمين

### الحقول الأساسية:
- id: معرف فريد
- username: اسم المستخدم
- password: كلمة المرور
- role: الدور (athlete, coach, medical_staff, etc.)
- firstName, lastName: الاسم الأساسي
- firstNameAr, lastNameAr: الاسم بالعربية
- email, phone: معلومات التواصل
- clubId: معرف النادي المرتبط
- isActive: حالة التفعيل

### الحقول الإضافية للرياضيين:
- dateOfBirth: تاريخ الميلاد
- gender: الجنس
- weight, height: الوزن والطول
- belt, beltAr: الحزام
- fatherName, motherName: أسماء الوالدين
- birthPlace: مكان الميلاد
- bloodType: فصيلة الدم

## الخدمات المستخدمة

### UserService
```typescript
// الحصول على جميع المستخدمين
UserService.getAllUsers()

// الحصول على مستخدمين نادي معين
UserService.getUsersByClub(clubId)

// الحصول على الرياضيين في نادي معين
UserService.getAthletesByClub(clubId)

// الحصول على المدربين في نادي معين
UserService.getCoachesByClub(clubId)

// إنشاء مستخدم جديد
UserService.createUser(userData)

// تسجيل الدخول
UserService.login(username, password)
```

## تدفق العمل

### 1. إعداد النظام
1. المشرف يدخل بالنقر ثلاث مرات على الشعار
2. يذهب إلى تبويب "إدارة المستخدمين"
3. ينشئ الأندية حسب الحاجة
4. ينشئ المستخدمين ويربطهم بالأندية

### 2. استخدام النظام
1. المستخدمون العاديون يدخلون عبر صفحة تسجيل الدخول
2. يتم توجيههم إلى صفحاتهم حسب أدوارهم
3. كل مستخدم يرى فقط البيانات المتعلقة بناديه

## الأمان

- كلمات المرور مشفرة
- فصل واضح بين صلاحيات المشرفين والمستخدمين العاديين
- حماية الصفحات حسب الأدوار
- تخزين محلي آمن للبيانات

## التطوير المستقبلي

يمكن توسيع النظام ليشمل:
- إدارة الأدوار والصلاحيات بشكل أكثر تفصيلاً
- نظام إشعارات للمستخدمين
- تقارير وإحصائيات للمدربين
- تكامل مع قواعد بيانات خارجية